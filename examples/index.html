<html>

<head>
	<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
	<script src="https://unpkg.com/manifesto.js/dist/client/manifesto.bundle.js"></script>
	<script src="https://unpkg.com/iiif-explorer/dist/iiifexplorer.js"></script>
	<script src="iiiframe.js"></script>
	<script src="https://unpkg.com/proxy-observe@0.0.21/browser/proxy-observe.min.js"></script>
	<style>
	* {
		box-sizing: border-box;
	}

	body {
		margin: 0;
		padding: 0;
		font-family: Arial, Helvetica, sans-serif;
	}
	
	#example {
		display: flex;
		height: 100%;
	}
	
	#scene {
		flex: 70%;
	}

	#options {
		flex: 30%;
		background: #2dc1ef;
		padding: 1rem;
	}
	</style>
</head>

<body>

	<div id="example">

		<div id="scene">
			
		</div>

		<div id="options">
			<h3>Choose a manifest</h3>
			<iiif-explorer></iiif-explorer>
		</div>

	</div>
	
	<script>
		document.addEventListener("DOMContentLoaded", function (event) {

			var explorer = document.querySelector('iiif-explorer');
			explorer.manifest = "https://edsilv.github.io/iiiframe/collection/";

			explorer.addEventListener('onSelectManifest', function(evt) {
                var manifest = evt.detail.id;
				var scene = document.querySelector('#scene');
				scene.innerHTML = '';

				var ascene = document.createElement('a-scene');
				ascene.setAttribute('embedded', true);
				scene.appendChild(ascene);
				
				iiiframe(ascene, manifest);
            });

		});
	</script>

</body>

</html>